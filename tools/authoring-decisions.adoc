= Authoring Decisions
include::../partials/attributes.adoc[]

Decision authoring on {CANVAS} happens inside the Editor page for Decisions, where you can edit, validate, run, and deploy DMN files.

For this version, we have developed a brand new DMN Editor compatible with the DMN specification 1.5. For the purpose of reduce ambiguity on the documentation we will address this editor as the New DMN Editor, and the previous editor as the Legacy Editor. It's important to notice that it is still possible to use the Legacy Editor, but bear in mind that files edited on the New Editor will not be compatible with the Legacy Editor, but the opposite is not true.

Now, we start with an Overview, showing what additional capabilities the New Editor has, then we make an in depth analisys of its features and how to use them.

== Overview

As mentioned before, the new DMN editor has the capability to open and edit DMNs from version 1.5 or below, but it will always save as a DMN 1.5. This is important as it will not be possible to open the file generated by the New  Editor on other editors that don't support version 1.5, like the Legacy Editor.

The Legacy Editor supported DMN version 1.2 with some additional 1.3 capabilities, making this a huge step in functionalities. Here we summarize those.

=== version 1.3

The Legacy Editor already supported some 1.3 features, such as the temporal FEEL Functions. A new addition is the Group node, an different type of artifact. It enables the user to create groups on the DRD, enhancing the experience by providing a better way to organize and visualize the model.

.Collection mark
image::tools/overview-1.3-group-node.png[width=300]

=== version 1.4

This version adds new functionalities for the FEEL functions, Boxed Expression, and DRD representation.

. FEEL Functions

The following FEEL functions were added: context, context put, context merge, number floor, number ceiling, number round up, number round down, number round half up, number round half down and string join.

[start=2]
. Boxed Expression

Adds the Filter, Conditional, Iterator, Every and Some Boxed Expressions.

[start=3]
. DRD

Adds a marker on the DRD for nodes that has a collection data type.

.Collection mark
image::tools/overview-1.4-collection-marker.png[width=300]

=== version 1.5

This version adds new FEEL Functions, changes to the DRD and some general changes for the DMN model.

. FEEL Functions

Adds the "list replace" function, and the "scientific notation".

[start=2]
. DRD

Adds the representation of an alternative Input Data node. This visualization adds visual cohesion to the BPMN model. This alternative visual representation is a DRD option, affecting all Input Data nodes on the DRD. More about this on the Editor DRD section.

.alternative Input Data node representation
image::tools/overview-1.5-alternative-input-data-node.png[width=150]

[start=3]
. General
.. Importing into the default namespace
.. Allowed values on Unary Test?
.. more?

.Previous missing functionalities
One of the missing functionalities on our legacy editor that was added on the new one is the visual representation for nodes that have missing dependencies on the current DRD.

You can have multiple DRDs and not necessarily import all nodes. This visual representation helps to show the missing nodes in the opened DRD.

.Figure 4. alternative Input Data node representation
image:tools/overview-missing-functionalities-ellipsis-1.png[title="Aaaa",width=300]
image:tools/overview-missing-functionalities-ellipsis-2.png[title="Bbbbb",width=300]



a

a

a

a


.Editor page for a Decision on {CANVAS} with highlighted elements of the DMN Editor
image::tools/image7.jpg[Editor page for a Decision on {CANVAS} with highlighted elements of the DMN Editor]

. *DMN Editor tabs →* Here you can switch between the four screens that compose the DMN Editor.
[loweralpha]
.. Editor → Will display your DRG and DRDs you select.
   This is where you edit your DMN model and create relationships between its nodes.
.. Documentation → Will display a downloadable PDF containing the specification of your Decision.
.. Data Types → Lets you manage the Data Types that are part of your Decision.
.. Included Models → Lets you manage other Decisions you linked to your current Decision.
   Including a Decision lets you reuse nodes and Data Types from it.
. *Search button →* Lets you search specific elements of your Decision.
. *Side panel strip* → Lets you select which side panel you want to toggle.
  From top to bottom, those are the available panels:
[loweralpha]
.. Navigator → Displays all the elements of your Decision organized by DRG and DRDs, and types.
.. Properties → Lets you manage the properties of a Decision element.
.. Preview → Displays a minimap of your DRG.
. *Node palette →* From here you can select nodes and drag them into your DRG or DRDs..
. *Keyboard shortcuts panel toggle →* Clicking here toggles a panel with information of keyboard shortcuts available on the DMN Editor.

The DMN Editor lets you develop Decisions and Business Knowledge Models (BKMs) using the DMN Boxed Expression Editor.
Drag a new Decision or BKM node to the DRG and let's open it with the DMN Boxed Expression Editor.

image:tools/image6.png[tools/image6,width=181,height=100] image:tools/image2.png[tools/image2,width=187,height=103]

_Decision and Business Knowledge Model on the DMN Editor, side by side, showing their Edit button, that brings you to their implementations inside the Boxed Expression Editor, on {CANVAS}._

Selecting Edit on a new Decision will bring you to an empty Boxed Expression.
On a new BKM you'll have an empty Boxed Function.
The implementation of this Boxed Function can be of any type.

.Boxed Expression Editor for a new BKM inside the DMN Editor on {CANVAS}
image::tools/image28.png[width=300]

.Boxed Expression Editor for a new Decision inside the DMN Editor on {CANVAS}
image::tools/image19.png[width=300]

Selecting a Boxed Expression type will update the implementation of the Decision or BKM.

Here's an example Decision Table.

.Boxed Expression implementation example for a Loan Pre-Qualification Decision inside the DMN Editor, on {CANVAS}
image::tools/image4.png[]

And a BKM with a Literal implementation.

.Boxed Expression implementation example for a PITI BKM inside the DMN Editor, on {CANVAS}
image::tools/image18.png[width=500]

The Boxed Expression Editor is very capable, and can handle complex implementations.
It's built based on the same Table component {CANVAS} uses on DMN Runner, so you'll feel at home in both places.

Developing Decisions through DMN files is a complex subject and has many intricacies that are out of the scope of this document.
Please refer to DMN-specific material, like the https://www.omg.org/spec/DMN/1.3/PDF[DMN specification] itself.
